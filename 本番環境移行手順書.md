# æ—¥åˆ©è¨ˆç®—v2ã‚·ã‚¹ãƒ†ãƒ  æœ¬ç•ªç’°å¢ƒç§»è¡Œæ‰‹é †æ›¸

## ðŸ“‹ å‰ææ¡ä»¶

- âœ… ãƒ†ã‚¹ãƒˆç’°å¢ƒï¼ˆstagingï¼‰ã§å‹•ä½œç¢ºèªæ¸ˆã¿
- âœ… ç¤¾å†…ã§å®Ÿéš›ã®æ—¥åˆ©ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆå®Œäº†
- âœ… å•é¡Œãªãå‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ðŸš€ ç§»è¡Œæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒšã‚¬ã‚µã‚¹æ—¥åˆ©è¨ˆç®—ã®ä¿®æ­£

æœ¬ç•ªç’°å¢ƒã®Supabase SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

**å®Ÿè¡Œã™ã‚‹SQL:** `scripts/fix-pegasus-daily-yield-calculation.sql`

**ç›®çš„:** ãƒšã‚¬ã‚µã‚¹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ—¥åˆ©è¨ˆç®—ã‚’1000ãƒ‰ãƒ«ãƒ™ãƒ¼ã‚¹ã«ä¿®æ­£

**ç¢ºèªæ–¹æ³•:**
```sql
-- æ—¢å­˜ã®RPCé–¢æ•°ã‚’ç¢ºèª
SELECT proname, pronargs
FROM pg_proc
WHERE proname LIKE '%daily_yield%'
ORDER BY proname;
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: v2ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ

æœ¬ç•ªç’°å¢ƒã®Supabase SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

**å®Ÿè¡Œã™ã‚‹SQL:** `scripts/create-new-yield-system-tables.sql`

**ç›®çš„:** v2ã‚·ã‚¹ãƒ†ãƒ ç”¨ã®æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ

**ç¢ºèªæ–¹æ³•:**
```sql
-- ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚ŒãŸã‹ç¢ºèª
SELECT table_name
FROM information_schema.tables
WHERE table_schema = 'public'
AND table_name IN ('daily_yield_log_v2', 'user_monthly_summary', 'stock_fund', 'daily_yield_calculation_log')
ORDER BY table_name;
```

**æœŸå¾…ã•ã‚Œã‚‹çµæžœ:** 4ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### ã‚¹ãƒ†ãƒƒãƒ—3: v2 RPCé–¢æ•°ã®ä½œæˆ

æœ¬ç•ªç’°å¢ƒã®Supabase SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

**å®Ÿè¡Œã™ã‚‹SQL:** `scripts/create-rpc-process-daily-yield-v2.sql`

**ç›®çš„:** æ–°ã—ã„ç´¯ç©ãƒ™ãƒ¼ã‚¹ã®æ—¥åˆ©è¨ˆç®—é–¢æ•°ã‚’ä½œæˆ

**ç¢ºèªæ–¹æ³•:**
```sql
-- é–¢æ•°ãŒä½œæˆã•ã‚ŒãŸã‹ç¢ºèª
SELECT proname, pronargs
FROM pg_proc
WHERE proname = 'process_daily_yield_v2';
```

**æœŸå¾…ã•ã‚Œã‚‹çµæžœ:** `process_daily_yield_v2` ãŒ3å¼•æ•°ã§è¡¨ç¤ºã•ã‚Œã‚‹

---

### ã‚¹ãƒ†ãƒƒãƒ—4: v2 RPCé–¢æ•°ã®æ›´æ–°ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰

æœ¬ç•ªç’°å¢ƒã®Supabase SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

**å®Ÿè¡Œã™ã‚‹SQL:** `scripts/fix-rpc-for-test-mode.sql`

**ç›®çš„:** ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å¯¾å¿œã¨buyback_dateå¯¾å¿œã‚’è¿½åŠ 

**ç¢ºèªæ–¹æ³•:**
```sql
-- é–¢æ•°ã®æœ€çµ‚æ›´æ–°ã‚’ç¢ºèª
SELECT
  proname,
  pronargs,
  pg_get_functiondef(oid) LIKE '%p_is_test_mode%' as has_test_mode
FROM pg_proc
WHERE proname = 'process_daily_yield_v2';
```

**æœŸå¾…ã•ã‚Œã‚‹çµæžœ:** `has_test_mode` ãŒ `true`

---

### ã‚¹ãƒ†ãƒƒãƒ—5: RLSï¼ˆRow Level Securityï¼‰è¨­å®š

æœ¬ç•ªç’°å¢ƒã®Supabase SQL Editorã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

**ç›®çš„:** ç®¡ç†ç”»é¢ã‹ã‚‰`daily_yield_log_v2`ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

**å®Ÿè¡Œã™ã‚‹SQL:**
```sql
-- èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ daily_yield_log_v2 ã‚’èª­ã¿å–ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
CREATE POLICY "èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯èª­ã¿å–ã‚Šå¯" ON daily_yield_log_v2
FOR SELECT
TO authenticated
USING (true);
```

**âš ï¸ æ³¨æ„:** ãƒ†ã‚¹ãƒˆç’°å¢ƒã§406ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã®å¯¾å‡¦æ³•ã¨åŒã˜ã§ã™ã€‚

**ç¢ºèªæ–¹æ³•:**
```sql
-- RLSãƒãƒªã‚·ãƒ¼ã®ç¢ºèª
SELECT tablename, policyname, permissive, roles, cmd
FROM pg_policies
WHERE tablename = 'daily_yield_log_v2';
```

**æœŸå¾…ã•ã‚Œã‚‹çµæžœ:** ãƒãƒªã‚·ãƒ¼ãŒ1ä»¶ä»¥ä¸Šè¡¨ç¤ºã•ã‚Œã‚‹

---

### ã‚¹ãƒ†ãƒƒãƒ—6: æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼ˆå¿…è¦ãªå ´åˆã®ã¿ï¼‰

**âš ï¸ æ³¨æ„:** æœ¬ç•ªç’°å¢ƒã«æ—¢å­˜ã®æ—¥åˆ©ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã®ã¿å®Ÿè¡Œ

#### 6-1. æ—§ã‚·ã‚¹ãƒ†ãƒ ã®ä¸è¦ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ï¼ˆç‰¹å®šæœŸé–“ã®ã¿ï¼‰

```sql
-- ä¾‹: 2025/11/1ï½ž11/5ã®æ—§ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã™ã‚‹å ´åˆ
DELETE FROM nft_daily_profit WHERE date >= '2025-11-01' AND date <= '2025-11-05';
DELETE FROM user_referral_profit WHERE date >= '2025-11-01' AND date <= '2025-11-05';
DELETE FROM stock_fund WHERE date >= '2025-11-01' AND date <= '2025-11-05';
DELETE FROM daily_yield_log WHERE date >= '2025-11-01' AND date <= '2025-11-05';
```

#### 6-2. affiliate_cycleã®ãƒªã‚»ãƒƒãƒˆï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

**âš ï¸ è¶…é‡è¦:** æœ¬ç•ªç’°å¢ƒã§ã¯å®Ÿè¡Œå‰ã«å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã‚‹ã“ã¨ï¼

```sql
-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
CREATE TABLE affiliate_cycle_backup_20251109 AS
SELECT * FROM affiliate_cycle;

-- å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®affiliate_cycleã‚’ãƒªã‚»ãƒƒãƒˆ
UPDATE affiliate_cycle
SET
  available_usdt = 0,
  cum_usdt = 0,
  phase = 'USDT',
  auto_nft_count = 0,
  updated_at = NOW()
WHERE available_usdt != 0 OR cum_usdt != 0;

-- ç¢ºèª
SELECT COUNT(*) as reset_count
FROM affiliate_cycle
WHERE available_usdt = 0 AND cum_usdt = 0;
```

**ç¢ºèªæ–¹æ³•:**
```sql
-- ãƒªã‚»ãƒƒãƒˆå‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç¢ºèª
SELECT COUNT(*) FROM affiliate_cycle_backup_20251109;

-- ãƒªã‚»ãƒƒãƒˆå¾Œã®ç¢ºèª
SELECT
  COUNT(*) as total_users,
  SUM(CASE WHEN available_usdt = 0 AND cum_usdt = 0 THEN 1 ELSE 0 END) as reset_users
FROM affiliate_cycle;
```

---

### ã‚¹ãƒ†ãƒƒãƒ—7: Gitã®ãƒžãƒ¼ã‚¸ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

#### 7-1. ãƒ­ãƒ¼ã‚«ãƒ«ã§stagingã‹ã‚‰mainã«ãƒžãƒ¼ã‚¸

```bash
# mainãƒ–ãƒ©ãƒ³ãƒã«åˆ‡ã‚Šæ›¿ãˆ
git checkout main

# stagingãƒ–ãƒ©ãƒ³ãƒã‚’ãƒžãƒ¼ã‚¸
git merge staging

# æœ¬ç•ªç’°å¢ƒã«ãƒ—ãƒƒã‚·ãƒ¥
git push origin main
```

#### 7-2. Vercelã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

1. https://vercel.com/your-project ã«ã‚¢ã‚¯ã‚»ã‚¹
2. Deploymentsã‚¿ãƒ–ã§`main`ãƒ–ãƒ©ãƒ³ãƒã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç¢ºèª
3. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒ"Ready"ã«ãªã‚‹ã¾ã§å¾…ã¤ï¼ˆé€šå¸¸2ï½ž3åˆ†ï¼‰

---

### ã‚¹ãƒ†ãƒƒãƒ—8: æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

#### 8-1. ç®¡ç†ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹

https://hashpilot.net/admin/yield

**ç¢ºèªé …ç›®:**
- âœ… ã€Œæ—¥åˆ©è¨­å®šï¼ˆv2ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã€ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹
- âœ… ã€Œå…¨ä½“é‹ç”¨åˆ©ç›Š ($)ã€ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒã‚ã‚‹
- âœ… é‡‘é¡ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€Œè¨ˆç®—ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«ã€Œå¯¾è±¡NFTæ•°ã€ã€Œé…å¸ƒå¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã€ã€Œ1NFTã‚ãŸã‚Šåˆ©ç›Šã€ã€Œå¹³å‡ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… å±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ãƒ©ãƒ ãŒæ—¥æœ¬èªžï¼ˆç´¯ç©åˆ©ç›Šã€ç´¯ç©æ‰‹æ•°æ–™ã€é¡§å®¢ç´¯ç©åˆ©ç›Šã€å½“æ—¥åˆ©ç›Šï¼‰
- âœ… çµ±è¨ˆã‚«ãƒ¼ãƒ‰ã«ã€Œé‹ç”¨ä¸­NFTæ•°ã€ã€Œé¡§å®¢ç´¯ç©åˆ©ç›Šã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹

#### 8-2. ãƒ†ã‚¹ãƒˆæ—¥åˆ©ã‚’è¨­å®š

**ä¾‹:**
- æ—¥ä»˜: ä»Šæ—¥ã®æ—¥ä»˜
- å…¨ä½“é‹ç”¨åˆ©ç›Š: `100.00` (å°ã•ã„é‡‘é¡ã§ãƒ†ã‚¹ãƒˆ)

**æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºèª:**
```
âœ… æ—¥åˆ©è¨ˆç®—å®Œäº†: YYYY-MM-DD

å‡¦ç†è©³ç´°:
â€¢ å…¥åŠ›: å…¨ä½“åˆ©ç›Š $100.00
â€¢ NFTæ•°: XXXå€‹ â†’ 1NFTã‚ãŸã‚Š $X.XXXX

ç´¯ç©è¨ˆç®—:
â€¢ ç´¯ç©åˆ©ç›Šï¼ˆæ‰‹æ•°æ–™å‰ï¼‰: $XXX.XX
â€¢ ç´¯ç©æ‰‹æ•°æ–™: $XXX.XX
â€¢ é¡§å®¢ç´¯ç©åˆ©ç›Š: $XXX.XX
â€¢ å½“æ—¥åˆ©ç›Š: $XXX.XX

åˆ†é…:
â€¢ é…å½“ (60%): $XXX.XX
â€¢ ã‚¢ãƒ•ã‚£ãƒª (30%): $XXX.XX
â€¢ ã‚¹ãƒˆãƒƒã‚¯ (10%): $XXX.XX
```

#### 8-3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèª

https://hashpilot.net/dashboard ï¼ˆãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ï¼‰

**ç¢ºèªé …ç›®:**
- âœ… ã€Œä»Šæœˆã®ç´¯ç©åˆ©ç›Šã€ã«é‡‘é¡ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã‚°ãƒ©ãƒ•ã«ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„

---

## ðŸ“ æœ¬ç•ªç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹SQLãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| é †åº | ãƒ•ã‚¡ã‚¤ãƒ«å | ç›®çš„ | å¿…é ˆ/ä»»æ„ |
|------|-----------|------|----------|
| 1 | `scripts/fix-pegasus-daily-yield-calculation.sql` | ãƒšã‚¬ã‚µã‚¹æ—¥åˆ©è¨ˆç®—ä¿®æ­£ | **å¿…é ˆ** |
| 2 | `scripts/create-new-yield-system-tables.sql` | v2ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ | **å¿…é ˆ** |
| 3 | `scripts/create-rpc-process-daily-yield-v2.sql` | v2 RPCé–¢æ•°ä½œæˆ | **å¿…é ˆ** |
| 4 | `scripts/fix-rpc-for-test-mode.sql` | v2 RPCé–¢æ•°æ›´æ–°ï¼ˆãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰ | **å¿…é ˆ** |
| 5 | RLSè¨­å®šSQLï¼ˆã‚¹ãƒ†ãƒƒãƒ—5å‚ç…§ï¼‰ | daily_yield_log_v2ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™è¨­å®š | **å¿…é ˆ** |
| 6 | ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—SQLï¼ˆã‚¹ãƒ†ãƒƒãƒ—6å‚ç…§ï¼‰ | æ—¢å­˜ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ | ä»»æ„ |

**å®Ÿè¡Œé †åºãŒé‡è¦:** ä¸Šè¨˜ã®é †ç•ªã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

### 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¿…é ˆ

æœ¬ç•ªç’°å¢ƒã§å®Ÿè¡Œã™ã‚‹å‰ã«ã€å¿…ãšãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã‚‹ã“ã¨ï¼š

```sql
-- ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
CREATE TABLE affiliate_cycle_backup_20251109 AS SELECT * FROM affiliate_cycle;
CREATE TABLE daily_yield_log_backup_20251109 AS SELECT * FROM daily_yield_log;
CREATE TABLE nft_daily_profit_backup_20251109 AS SELECT * FROM nft_daily_profit;
CREATE TABLE user_referral_profit_backup_20251109 AS SELECT * FROM user_referral_profit;
```

### 2. ãƒ”ãƒ¼ã‚¯æ™‚é–“ã‚’é¿ã‘ã‚‹

- æ—¥æœ¬æ™‚é–“ã®æ·±å¤œï¼ˆ0æ™‚ï½ž6æ™‚ï¼‰ã¾ãŸã¯æ—©æœï¼ˆ6æ™‚ï½ž9æ™‚ï¼‰ã«å®Ÿè¡ŒæŽ¨å¥¨
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹ãŒå°‘ãªã„æ™‚é–“å¸¯ã‚’é¸ã¶

### 3. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š

```bash
# Gitã§ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
git checkout main
git revert HEAD
git push origin main

# Supabaseã§ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
-- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰å¾©å…ƒ
TRUNCATE affiliate_cycle;
INSERT INTO affiliate_cycle SELECT * FROM affiliate_cycle_backup_20251109;
```

### 4. ãƒ†ã‚¹ãƒˆç’°å¢ƒã¨ã®é•ã„

- **RPCé–¢æ•°ã®ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰**: æœ¬ç•ªã§ã¯`p_is_test_mode = FALSE`ã§å®Ÿè¡Œ
- **NFTæ•°**: æœ¬ç•ªç’°å¢ƒã®NFTæ•°ã¯833å€‹ï¼ˆãƒ†ã‚¹ãƒˆç¢ºèªæ¸ˆã¿ï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°**: æœ¬ç•ªç’°å¢ƒã®å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã§å‹•ä½œ

---

## âœ… ç§»è¡Œå®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ç§»è¡Œå‰
- [ ] ãƒ†ã‚¹ãƒˆç’°å¢ƒã§å‹•ä½œç¢ºèªå®Œäº†
- [ ] ç¤¾å†…ã§å®Ÿéš›ã®æ—¥åˆ©ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆå®Œäº†
- [ ] æœ¬ç•ªSupabaseã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å–å¾—å®Œäº†
- [ ] ç§»è¡Œæ™‚é–“ã‚’æ±ºå®šï¼ˆãƒ”ãƒ¼ã‚¯æ™‚é–“å¤–ï¼‰

### ç§»è¡Œä¸­
- [ ] ã‚¹ãƒ†ãƒƒãƒ—1: ãƒšã‚¬ã‚µã‚¹æ—¥åˆ©è¨ˆç®—ä¿®æ­£å®Œäº†
- [ ] ã‚¹ãƒ†ãƒƒãƒ—2: v2ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†
- [ ] ã‚¹ãƒ†ãƒƒãƒ—3: v2 RPCé–¢æ•°ä½œæˆå®Œäº†
- [ ] ã‚¹ãƒ†ãƒƒãƒ—4: v2 RPCé–¢æ•°æ›´æ–°å®Œäº†
- [ ] ã‚¹ãƒ†ãƒƒãƒ—5: RLSè¨­å®šå®Œäº†
- [ ] ã‚¹ãƒ†ãƒƒãƒ—6: ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å®Œäº†ï¼ˆå¿…è¦ãªå ´åˆï¼‰
- [ ] ã‚¹ãƒ†ãƒƒãƒ—7: Gitãƒžãƒ¼ã‚¸ï¼†ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†

### ç§»è¡Œå¾Œ
- [ ] ç®¡ç†ç”»é¢ã®è¡¨ç¤ºç¢ºèª
- [ ] çµ±è¨ˆã‚«ãƒ¼ãƒ‰ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€é‹ç”¨ä¸­NFTæ•°ã€ç·æŠ•è³‡é¡ã€é¡§å®¢ç´¯ç©åˆ©ç›Šï¼‰ã®è¡¨ç¤ºç¢ºèª
- [ ] ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã®å‹•ä½œç¢ºèªï¼ˆé‡‘é¡å…¥åŠ›æ™‚ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
- [ ] ãƒ†ã‚¹ãƒˆæ—¥åˆ©è¨­å®šæˆåŠŸ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¡¨ç¤ºç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèªï¼ˆSupabaseãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- [ ] å®Ÿéš›ã®æ—¥åˆ©ã‚’è¨­å®šã—ã¦æœ¬ç•ªé‹ç”¨é–‹å§‹

---

## ðŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "function process_daily_yield_v2 does not exist"

**åŽŸå› :** RPCé–¢æ•°ãŒä½œæˆã•ã‚Œã¦ã„ãªã„

**è§£æ±º:**
```sql
-- scripts/fix-rpc-for-test-mode.sql ã‚’å†å®Ÿè¡Œ
```

### ã‚¨ãƒ©ãƒ¼: "table daily_yield_log_v2 does not exist"

**åŽŸå› :** v2ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ãªã„

**è§£æ±º:**
```sql
-- scripts/create-new-yield-system-tables.sql ã‚’å†å®Ÿè¡Œ
```

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã€Œä»Šæœˆã®ç´¯ç©åˆ©ç›Šã€ãŒè¡¨ç¤ºã•ã‚Œãªã„

**åŽŸå› :** æ—¥åˆ©ãƒ‡ãƒ¼ã‚¿ãŒã¾ã å…¥ã£ã¦ã„ãªã„

**è§£æ±º:** ç®¡ç†ç”»é¢ã‹ã‚‰æ—¥åˆ©ã‚’è¨­å®šã™ã‚‹

### ç®¡ç†ç”»é¢ãŒå¤ã„UIï¼ˆï¼…å…¥åŠ›ï¼‰ã®ã¾ã¾

**åŽŸå› :** ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¾ãŸã¯ãƒ‡ãƒ—ãƒ­ã‚¤æœªå®Œäº†

**è§£æ±º:**
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒãƒ¼ãƒ‰ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ï¼ˆCtrl+Shift+Rï¼‰
2. Vercelã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
3. ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§ç¢ºèª

---

## ðŸ“ž ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆï¼š
1. Supabase SQL Editorã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
2. Vercel Deploymentsã®ãƒ­ã‚°ã‚’ç¢ºèª
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã‚’ç¢ºèª
4. å¿…è¦ã«å¿œã˜ã¦ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ

---

æœ€çµ‚æ›´æ–°: 2025å¹´11æœˆ9æ—¥
